import { registerMvuSchema as r } from 'https://raw.githubusercontent.com/khongtrung255-lab/dinhmenhchithi/refs/heads/main/bien.html';
const t = z,
    e = (r, e, a) => t.z.coerce.number().prefault(r).transform(r => _.clamp(r, e, a)),
    a = (r, t) => _.fromPairs(_.take(_.toPairs(r), t)),
    u = t.z.object({ introduction: t.z.string().prefault(''), target: t.z.string().prefault(''), reward: t.z.string().prefault('') }).prefault({}),
    n = t.z.object({ quality: t.z.string().prefault(''), type: t.z.string().prefault(''), tags: t.z.array(t.z.string()).prefault([]).transform(r => _.uniq(r)).optional(), effect: t.z.record(t.z.string(), t.z.string()).prefault({}), description: t.z.string().prefault('') }),
    f = n.extend({ position: t.z.string().prefault('') }),
    p = n.extend({ consumption: t.z.string().prefault('') }).transform(r => _.pick(r, ['quality', 'type', 'consumption', 'tags', 'effect', 'description'])),
    l = t.z.object({ type: t.z.enum(['Buff', 'Debuff', 'Special']).prefault('Buff'), effect: t.z.string().prefault(''), stacks: t.z.coerce.number().prefault(1), time_remaining: t.z.string().prefault(''), source: t.z.string().prefault('') }).prefault({}),
    s = n.extend({ quantity: t.z.coerce.number().prefault(1) }).transform(r => _.pick(r, ['quality', 'type', 'quantity', 'tags', 'effect', 'description'])),
    i = t.z.object(_.mapValues({ strength: 0, agility: 0, constitution: 0, intelligence: 0, spirit: 0 }, () => t.z.coerce.number().prefault(0))).prefault({}),
    o = t.z.object({ is_active: t.z.boolean().prefault(!1), elements: t.z.record(t.z.string(), t.z.record(t.z.string(), t.z.string())).prefault({}), authority: t.z.record(t.z.string(), t.z.record(t.z.string(), t.z.string())).prefault({}), laws: t.z.record(t.z.string(), t.z.record(t.z.string(), t.z.string())).prefault({}), god_rank: t.z.string().prefault(''), god_realm: t.z.object({ name: t.z.string().prefault(''), description: t.z.string().prefault('') }).prefault({}) }).prefault({}).transform(r => {
        const t = _.size(r.laws),
            e = _.size(r.authority),
            u = r.god_realm?.name ? Number.POSITIVE_INFINITY : r.god_rank ? 2 : 1;
        return t > 0 ? { ...r, elements: {}, authority: {}, laws: a(r.laws, u) } : e > 0 ? { ...r, elements: {}, authority: a(r.authority, 1), laws: a(r.laws, u) } : { ...r, elements: a(r.elements, 3), authority: a(r.authority, 1), laws: {} }
    }),
    c = t.z.object({ level: e(1, 1, 25), life_tier: t.z.string().prefault(''), race: t.z.string().prefault(''), identity: t.z.array(t.z.string()).prefault([]).transform(r => _.uniq(r)), profession: t.z.array(t.z.string()).prefault([]).transform(r => _.uniq(r)), attributes: i, equipment: t.z.record(t.z.string(), f).prefault({}), skills: t.z.record(t.z.string(), p).prefault({}), path_to_godhood: o }),
    g = t.z.object({ ...c.shape, total_exp: t.z.coerce.number().prefault(0), exp_to_level_up: t.z.union([t.z.coerce.number().prefault(120), t.z.literal('MAX')]), adventurer_rank: t.z.string().prefault('Chưa xếp hạng'), hp: t.z.coerce.number().prefault(0), max_hp: t.z.coerce.number().prefault(0), mp: t.z.coerce.number().prefault(0), max_mp: t.z.coerce.number().prefault(0), stamina: t.z.coerce.number().prefault(0), max_stamina: t.z.coerce.number().prefault(0), attribute_points: t.z.coerce.number().prefault(0), inventory: t.z.record(t.z.string(), s).prefault({}).transform(r => _.pickBy(r, r => r.quantity > 0)), money: t.z.coerce.number().prefault(0).transform(Math.round), status_effects: t.z.record(t.z.string(), l).prefault({}) }).prefault({}).transform(r => {
        const t = { ...r, exp_to_level_up: r.level >= 25 ? 'MAX' : r.exp_to_level_up, hp: _.clamp(r.hp, 0, r.max_hp), mp: _.clamp(r.mp, 0, r.max_mp), stamina: _.clamp(r.stamina, 0, r.max_stamina) };
        return _.pick(t, ['race', 'identity', 'profession', 'life_tier', 'level', 'total_exp', 'exp_to_level_up', 'adventurer_rank', 'attribute_points', 'attributes', 'max_hp', 'hp', 'max_mp', 'mp', 'max_stamina', 'stamina', 'status_effects', 'money', 'inventory', 'equipment', 'skills', 'path_to_godhood'])
    }),
    m = t.z.record(t.z.string(), t.z.object({ ...c.shape, is_present: t.z.boolean().prefault(!1), personality: t.z.string().prefault(''), likes: t.z.string().prefault(''), appearance: t.z.string().prefault(''), clothing: t.z.string().prefault(''), fated_contract: t.z.boolean().prefault(!1), favorability: e(0, -100, 100), inner_thoughts: t.z.string().prefault(''), background_story: t.z.string().prefault('') }).prefault({}).transform(r => _.pick(r, ['is_present', 'race', 'identity', 'profession', 'life_tier', 'personality', 'likes', 'appearance', 'clothing', 'level', 'attributes', 'equipment', 'skills', 'path_to_godhood', 'fated_contract', 'favorability', 'inner_thoughts', 'background_story']))).prefault({}),
    b = t.z.object({ astaria_express: t.z.object({ faction_news: t.z.string().prefault(''), divine_traces: t.z.string().prefault(''), military_actions: t.z.string().prefault(''), economic_artery: t.z.string().prefault(''), disaster_warning: t.z.string().prefault('') }).prefault({}), tavern_noticeboard: t.z.object({ high_bounty: t.z.string().prefault(''), adventure_discoveries: t.z.string().prefault(''), monster_movements: t.z.string().prefault(''), most_wanted: t.z.string().prefault(''), treasure_rumors: t.z.string().prefault('') }).prefault({}), afternoon_tea: t.z.object({ social_anecdotes: t.z.string().prefault(''), distant_vision: t.z.string().prefault(''), destiny_ripples: t.z.string().prefault(''), encounter_omens: t.z.string().prefault('') }).prefault({}) }),
    d = t.z.object({ events: t.z.record(t.z.any(), t.z.any()).prefault({}), world: t.z.object({ time: t.z.string().prefault(''), location: t.z.string().prefault('') }).prefault({}), quest_list: t.z.record(t.z.string(), u).prefault({}), protagonist: g.prefault({}), destiny_system: t.z.object({ destiny_points: (j = 0, h = 0, t.z.coerce.number().prefault(j).transform(r => Math.max(Math.round(r), h))), relationship_list: m }).prefault({}), news: b.prefault({}) });
var j, h; $(() => { r(d) });